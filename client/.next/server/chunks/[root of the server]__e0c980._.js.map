{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/halil/VSCodeProjects/steam_worth/app/api/steamFetch/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\n\r\n\r\nexport async function GET(req: Request) {\r\n    const { searchParams } = new URL(req.url);\r\n    const id = searchParams.get('id');\r\n    const key = process.env.STEAM_API_KEY;\r\n    console.log(key)\r\n    if (!id) {\r\n      console.log(\"ID is insufficient\")\r\n    }\r\n    try {\r\n        const accountSummary = await fetch(`https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=${key}&steamids=${id}`)\r\n        const accountSummaryData = await accountSummary.json()\r\n        const games = await fetch(`https://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=${key}&steamid=${id}&format=json`)\r\n        const gamesData = await games.json();\r\n        const timeCreated = parseInt(accountSummaryData.response.players[0].timecreated.toString(), 10);\r\n        const accountCreatedAt = new Date(timeCreated * 1000);\r\n        const currentDate = new Date();\r\n        const diffInMilli = currentDate.getTime() - accountCreatedAt.getTime();\r\n        const diffInYears = diffInMilli / (1000 * 60 * 60 * 24 * 365.25);\r\n        const accountAge = Math.floor(diffInYears);\r\n        const selectedFeatures = {\r\n            avatar: accountSummaryData.response.players[0].avatarmedium,\r\n            visibility: accountSummaryData.response.players[0].communityvisibilitystate,\r\n            name: accountSummaryData.response.players[0].personaname,\r\n            accountAge: accountAge \r\n        }\r\n        return NextResponse.json({account: selectedFeatures, games: gamesData.response.games}, {status: 200})\r\n    } catch (error) {\r\n        console.log(error)\r\n        return NextResponse.json(error, {status: 500})\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAGO,eAAe,IAAI,GAAY;IAClC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,KAAK,aAAa,GAAG,CAAC;IAC5B,MAAM,MAAM,QAAQ,GAAG,CAAC,aAAa;IACrC,QAAQ,GAAG,CAAC;IACZ,IAAI,CAAC,IAAI;QACP,QAAQ,GAAG,CAAC;IACd;IACA,IAAI;QACA,MAAM,iBAAiB,MAAM,MAAM,CAAC,sEAAsE,EAAE,IAAI,UAAU,EAAE,IAAI;QAChI,MAAM,qBAAqB,MAAM,eAAe,IAAI;QACpD,MAAM,QAAQ,MAAM,MAAM,CAAC,qEAAqE,EAAE,IAAI,SAAS,EAAE,GAAG,YAAY,CAAC;QACjI,MAAM,YAAY,MAAM,MAAM,IAAI;QAClC,MAAM,cAAc,SAAS,mBAAmB,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,WAAW,CAAC,QAAQ,IAAI;QAC5F,MAAM,mBAAmB,IAAI,KAAK,cAAc;QAChD,MAAM,cAAc,IAAI;QACxB,MAAM,cAAc,YAAY,OAAO,KAAK,iBAAiB,OAAO;QACpE,MAAM,cAAc,cAAc,CAAC,OAAO,KAAK,KAAK,KAAK,MAAM;QAC/D,MAAM,aAAa,KAAK,KAAK,CAAC;QAC9B,MAAM,mBAAmB;YACrB,QAAQ,mBAAmB,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,YAAY;YAC3D,YAAY,mBAAmB,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,wBAAwB;YAC3E,MAAM,mBAAmB,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,WAAW;YACxD,YAAY;QAChB;QACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAC,SAAS;YAAkB,OAAO,UAAU,QAAQ,CAAC,KAAK;QAAA,GAAG;YAAC,QAAQ;QAAG;IACvG,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,OAAO;YAAC,QAAQ;QAAG;IAChD;AACJ"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}